<main class="container">
  <header class="page-header">
    <img class="brand-logo" src="assets/pushup-logo.svg" alt="Pushup Tracker Logo" />
    <div>
      <p class="eyebrow">Pushup Stats</p>
      <h1>Liegestütze Statistik</h1>
      <p class="subtitle">Behalte Trainingsvolumen und Verlauf im Blick – klar, schnell und mobil optimiert.</p>
    </div>
  </header>

  <section class="mini-badges" aria-label="All-Time Kurzübersicht">
    <span class="badge"><small>All-Time Gesamt</small><b>{{ allTimeTotal() }}</b></span>
    <span class="badge"><small>All-Time Tage</small><b>{{ allTimeDays() }}</b></span>
    <span class="badge"><small>All-Time Einträge</small><b>{{ allTimeEntries() }}</b></span>
    <span class="badge"><small>All-Time Ø/Tag</small><b>{{ allTimeAvg() }}</b></span>
  </section>

  <section class="panel">
    <app-filter-bar [from]="from()" [to]="to()" (fromChange)="from.set($event)" (toChange)="to.set($event)" />
  </section>

  <app-kpi-cards [total]="total()" [days]="days()" [entries]="entries()" [avg]="avg()" />

  @if (errorMessage()) {
    <section class="status-banner error" role="alert" aria-live="polite">
      {{ errorMessage() }}
    </section>
  }

  @if (loading()) {
    <section class="status-banner loading" aria-live="polite">Lade Statistikdaten…</section>
  }

  <section class="content-grid">
    <app-stats-chart [series]="rows()" [granularity]="granularity()" />
    <app-stats-table
      [entries]="entryRows()"
      [busyAction]="busyAction()"
      [busyId]="busyId()"
      (create)="onCreateEntry($event)"
      (update)="onUpdateEntry($event)"
      (remove)="onDeleteEntry($event)"
    />
  </section>
</main>
